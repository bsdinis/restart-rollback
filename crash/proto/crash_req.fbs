include "crash.fbs";

namespace paxos_sgx.crash;

table ClientFastGetArgs {
    account : int64;
}

table OperationArgs {
    account : int64;
    to      : int64;
    amount  : int64;
}


table ReplicaFastGetArgs {
    account : int64;
}

table ReplicaProposeArgs {
    operation_args: OperationArgs;
    slot_number: int64;
}

table ReplicaAcceptArgs {
    slot_number: int64;
}

table PingArgs { }

table CloseArgs { }

table ResetArgs { }

union ReqArgs {
    ClientFastGetArgs,
    OperationArgs,
    ReplicaFastGetArgs,
    ReplicaProposeArgs,
    ReplicaAcceptArgs,
    PingArgs,
    CloseArgs,
    ResetArgs,
}

table BasicRequest {
    type    : ReqType;
    ticket  : int64;
    args    : ReqArgs;
}

root_type BasicRequest;
